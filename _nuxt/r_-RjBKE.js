import{e as h,a as E,_ as U,b as D,c as b,d as M}from"./DZosMtty.js";import{_ as H,r as n,E as L,o as R,J as W,v as d,K,L as c,x as e,y as m,M as y,N as C,O as F,P as J,B as k,Q as I,R as Q,t as l}from"./CNSeAyMM.js";import{s as j}from"./C12dHV-r.js";const q={setup(){const a=n(!1),s=Q(),f=n(!1),o=n(!1),g=n("忘記密碼"),w=n("forgetPassword"),u=n(["","","","",""]),t=n([]),i=n(60),v=n(null),A=()=>{f.value=!f.value},T=()=>{o.value=!o.value};L(u,r=>{r.every(p=>p!=="")&&(w.value="info")});const G=async()=>{a.value=!0,await new Promise(r=>setTimeout(r,750)),a.value=!1,w.value="verify",g.value="輸入驗證碼",N()},_=async r=>{var P,V;const p=u.value[r];p.length===1?r<u.value.length-1?(P=t.value[r+1])==null||P.focus():(w.value="resetPassword",g.value="重新設定密碼",a.value=!0,await new Promise(S=>setTimeout(S,750)),a.value=!1):p===""&&r>0&&((V=t.value[r-1])==null||V.focus())},B=r=>{const p=String.fromCharCode(r.which);/[0-9]/.test(p)||r.preventDefault()},N=()=>{i.value=60,v.value=j(()=>{i.value>0?i.value--:clearInterval(v.value)},1e3)},O=async()=>{a.value=!0,await new Promise(r=>setTimeout(r,750)),a.value=!1,alert("密碼重新設定完成，請用心密碼登入"),s.push({name:"login"})};return R(()=>{W(()=>{t.value=t.value.slice(0,u.value.length)})}),{verificationTitle:g,loading:a,verificationInput:t,currentStep:w,getVerificationCode:G,countdownTime:i,handleInput:_,allowOnlyNumbers:B,verificationCodes:u,passwordVisible:f,passwordAgainVisible:o,togglePasswordVisibility:A,togglePasswordAgainVisibility:T,eyesCloseGreen:h,eyesOpenGreen:E,resetPassword:O}}},z={class:"forgetPassword"},X={class:"forgetPasswordGroup"},Y={key:0,class:"forgetPasswordWrap"},Z={class:"forgetPasswordBox"},x={class:"phoneGroup"},$={key:1,class:"verfifyWrap"},ss={class:"verificationCodeGroup"},os=["onUpdate:modelValue","onInput"],es={class:"verificationCodeHintText"},ts={key:2,class:"resetPasswordWrap"},as={class:"resetPasswordBox"},rs={class:"passwordGroup"},is=["type"],ns=["src"],ls={key:0,class:"passwordHintText"},ds={class:"passwordAgainGroup"},us=["type"],vs=["src"],ps={key:1,class:"passwordAgainHintText"};function cs(a,s,f,o,g,w){const u=M;return l(),d("div",z,[o.loading?(l(),K(u,{key:0})):c("",!0),e("div",X,[s[17]||(s[17]=e("div",{class:"raphaelIconImgGroup"},[e("img",{class:"raphaelIcon",src:U,alt:""})],-1)),e("h1",null,m(o.verificationTitle),1),o.currentStep==="forgetPassword"?(l(),d("div",Y,[e("div",Z,[e("div",x,[y(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>a.mobile=t),placeholder:"請輸入您的手機號碼"},null,512),[[C,a.mobile]]),s[10]||(s[10]=e("img",{class:"icon1",src:D,alt:""},null,-1))])]),e("button",{class:"vertificationBtn",onClick:s[1]||(s[1]=(...t)=>o.getVerificationCode&&o.getVerificationCode(...t))}," 取得驗證碼 ")])):c("",!0),o.currentStep==="verify"?(l(),d("div",$,[e("div",ss,[(l(!0),d(F,null,J(o.verificationCodes,(t,i)=>y((l(),d("input",{key:i,ref_for:!0,ref:"verificationInput",type:"text",maxlength:"1",class:"vertifyCode","onUpdate:modelValue":v=>o.verificationCodes[i]=v,onInput:v=>o.handleInput(i),onKeypress:s[2]||(s[2]=(...v)=>o.allowOnlyNumbers&&o.allowOnlyNumbers(...v))},null,40,os)),[[C,o.verificationCodes[i]]])),128))]),e("div",es,[s[11]||(s[11]=k(" 驗證碼已傳送至您的裝置，請輸入驗證碼 ")),s[12]||(s[12]=e("br",null,null,-1)),k(" ("+m(o.countdownTime)+"秒後失效) ",1)]),s[13]||(s[13]=e("div",{class:"reSendText"},"重新發送",-1))])):c("",!0),o.currentStep==="resetPassword"?(l(),d("div",ts,[e("div",as,[e("div",rs,[y(e("input",{type:o.passwordVisible?"text":"password","onUpdate:modelValue":s[3]||(s[3]=t=>a.password=t),placeholder:"請輸入密碼",onInput:s[4]||(s[4]=(...t)=>a.validatePassword&&a.validatePassword(...t))},null,40,is),[[I,a.password]]),s[14]||(s[14]=e("img",{class:"icon1",src:b,alt:""},null,-1)),e("img",{class:"icon2",src:o.passwordVisible?o.eyesOpenGreen:o.eyesCloseGreen,onClick:s[5]||(s[5]=(...t)=>o.togglePasswordVisibility&&o.togglePasswordVisibility(...t)),alt:""},null,8,ns)]),a.passwordError?(l(),d("div",ls,m(a.passwordError),1)):c("",!0),e("div",ds,[y(e("input",{type:o.passwordAgainVisible?"text":"password","onUpdate:modelValue":s[6]||(s[6]=t=>a.passwordAgain=t),placeholder:"再次輸入您的密碼",onInput:s[7]||(s[7]=(...t)=>a.validatePasswordAgain&&a.validatePasswordAgain(...t))},null,40,us),[[I,a.passwordAgain]]),s[15]||(s[15]=e("img",{class:"icon1",src:b,alt:""},null,-1)),e("img",{class:"icon2",src:o.passwordAgainVisible?o.eyesOpenGreen:o.eyesCloseGreen,alt:"",onClick:s[8]||(s[8]=(...t)=>o.togglePasswordAgainVisibility&&o.togglePasswordAgainVisibility(...t))},null,8,vs)]),a.passwordAgainError?(l(),d("div",ps,m(a.passwordAgainError),1)):c("",!0)]),s[16]||(s[16]=e("div",{class:"privacyGroup"},[e("input",{type:"checkbox",id:"privacyInput"}),e("label",{for:"privacyInput"},"我已詳細閱讀隱私權政策")],-1)),e("button",{class:"resetPasswordBtn",onClick:s[9]||(s[9]=(...t)=>o.resetPassword&&o.resetPassword(...t))},"確定")])):c("",!0)])])}const ms=H(q,[["render",cs]]);export{ms as default};
